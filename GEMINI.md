### Next.js ベストプラクティス

- **`create-next-app` の利用:** プロジェクトのセットアップには、`create-next-app` CLIツールを使用します。
- **App Router の採用:** 新規プロジェクトではApp Routerを積極的に採用します。
- **TypeScript の導入:** 型安全のためにTypeScriptを使用します。
- **ESLint の設定:** コード品質を保つためにESLintを導入し、`npm run lint` を定期的に実行します。
- **`src/` ディレクトリの使用:** アプリケーションのソースコードは `src/` ディレクトリ内に配置します。
- **絶対パスインポートの設定:** `tsconfig.json` で `paths` を設定し、`@/` から始まる絶対パスでモジュールをインポートします。

#### ルーティングと構造
- **ファイルシステムベースのルーティング:** `app`ディレクトリ内にフォルダを作成し、`page.tsx`を配置してルートを定義します。
- **共有レイアウト:** 複数ページで共通のUIは`layout.tsx`に定義します。
- **ページ遷移:** 内部リンクには必ず`<Link>`コンポーネントを使用し、クライアントサイドナビゲーションを有効にします。

#### コンポーネント
- **サーバーコンポーネントとクライアントコンポーネントの分離:**
    - **原則:** `page.tsx`や`layout.tsx`は、可能な限りサーバーコンポーネントとして維持します。これにより、初期ロードパフォーマンスが向上します。
    - **ベストプラクティス:** `useState`, `useEffect`などのフックや、イベントリスナーといったインタラクティブな機能を必要とする部分は、独立したクライアントコンポーネント（例: `SignInForm.tsx`）に切り出します。そのファイルの先頭に`'use client'`を宣言してください。
    - **データ取得:** データ取得やバックエンド処理への直接アクセスは、サーバーコンポーネントで行います。

#### データ管理
- **データ取得:** データ取得は`async/await`を伴う`fetch` APIを使い、サーバーコンポーネント内で行います。
- **データ更新:** データの作成、更新、削除はサーバーアクション (`'use server'`) を使用します。
- **キャッシング:** Next.jsの自動キャッシュを活用します。オンデマンドでのキャッシュ更新には`revalidatePath`や`revalidateTag`を使用します。

#### UIとアセット
- **スタイリング:** スタイリングには`styled-components`を使用します。
- **画像最適化:** `next/image`の`<Image>`コンポーネントを使用して、画像の自動最適化を行います。
- **フォント最適化:** `next/font`を利用してWebフォントを最適化し、パフォーマンスを向上させます。

#### エラーハンドリングとSEO
- **エラー処理:** `error.tsx`でエラーUI境界を定義し、`not-found.tsx`で404ページをハンドリングします。
- **メタデータ:** `generateMetadata`関数を用いて、動的なメタデータやOG画像を生成し、SEOを強化します。

### Next.js アンチパターン (実装禁止)

- **手動でのプロジェクトセットアップ:** `create-next-app` を使わず、手動でNext.jsプロジェクトを構築することは避けます。
- **Pages Router の新規採用:** 新規プロジェクトで古いPages Routerを選択することはしません。
- **相対パスによる深いインポート:** `../../../` のような深い階層の相対パスでのインポートは禁止します。
- **リンター（ESLint）の未導入:** ESLintを導入しない、または設定をスキップすることは許可されません。
- **クライアントコンポーネントでのデータ取得:** サーバーコンポーネントで取得できるデータを、クライアントコンポーネントで取得することは避けます。
- **安易な`'use client'`の使用:** インタラクティブな部分をコンポーネントとして切り出せるにも関わらず、`page.tsx`全体をクライアントコンポーネントにすることは、パフォーマンスの観点から禁止します。
- **`<a>`タグによる内部リンク:** アプリケーション内のページ遷移にアンカータグ (`<a>`) を使用し、フルページリロードを発生させることは禁止です。必ず`<Link>`コンポーネントを使用してください。
- **最適化されていない画像・フォント:** 標準の`<img>`タグや手動でのフォントリンクを使用せず、Next.jsの最適化機能を活用します。
- **エラー処理の欠如:** `error.tsx`や`not-found.tsx`を定義せず、デフォルトのエラー表示に頼ることは避けます。